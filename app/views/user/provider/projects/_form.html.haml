
= flash_message

= form_with model: @project,
            url: (@project.new_record? ? user_provider_projects_path : user_provider_project_path(@project)),
            html: { class: 'require-validation' }, validate: true do |f|

  .card.mb-4
    .card-body
      .mb-3
        = f.label :title, class: 'col-sm-6 col-form-label'
        = f.text_field :title,
                    autofocus: true,
                    class: 'form-control'
        .letter-counter.mt-2.d-flex.justify-content-end

      .mb-3
        = f.label :user_ids, class: 'col-sm-6 col-form-label'
        = f.collection_select :user_ids,
                      current_user.decorate.list_users, :id, :full_name,
                      { },
                      multiple: true,
                      data: { size: 5, 'live-search' => true },
                      class: 'form-control selectpicker'

        .letter-counter.mt-2.d-flex.justify-content-end
      = f.fields_for :project_notifications, @project_notifications do |form|
        .mb-3
          = f.label :receive_email_when_tagged, class: 'col-sm-6 col-form-label'
          = f.text_field :receive_email_when_tagged,
                      class: 'form-control'
          .letter-counter.mt-2.d-flex.justify-content-end
        .mb-3
          = f.label :receive_email_when_client_responds, class: 'col-sm-6 col-form-label'
          = f.text_field :receive_email_when_client_responds,
                      class: 'form-control'
          .letter-counter.mt-2.d-flex.justify-content-end
    .row
      .d-grid.gap-2.col-3.mx-auto.mb-3
        = f.submit t('.confirm', default: t("helpers.submit.save")), class: 'btn btn-secondary rounded-pill'
